<!-- 
  Enhanced Cloudinary Image Helper with Environment Variable Support
  Usage: {% include cloudinary_env.html src="photo.jpg" alt="Description" transform="medium" folder="street" %}
-->
{% assign cloud_name = site.cloudinary.cloud_name %}
{% if site.env.CLOUDINARY_CLOUD_NAME %}
  {% assign cloud_name = site.env.CLOUDINARY_CLOUD_NAME %}
{% endif %}

{% assign base_url = "https://res.cloudinary.com/" | append: cloud_name | append: "/image/upload" %}

{% if include.transform %}
  {% assign transform = site.cloudinary.transforms[include.transform] %}
{% else %}
  {% assign transform = site.cloudinary.transforms.medium %}
{% endif %}

{% if include.folder %}
  {% assign folder_path = include.folder | append: "/" %}
{% else %}
  {% assign folder_path = "" %}
{% endif %}

{% assign full_url = base_url | append: "/" | append: transform | append: "/" | append: folder_path | append: include.src %}

<img 
  src="{{ full_url }}" 
  alt="{{ include.alt | default: 'Photography' }}" 
  loading="lazy" 
  ondragstart="return false;" 
  oncontextmenu="return false;"
  {% if include.class %}class="{{ include.class }}"{% endif %}
  {% if include.onclick %}onclick="{{ include.onclick }}"{% endif %}
>
